<!DOCTYPE html>
<html>
<head>
  <title>Métodos Computacionais para Análise de Risco</title>

  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'Métodos Computacionais para Análise de Risco',
                        subtitle: '01 - Introdução e Estrutura do Curso',
                useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                        favIcon: '01-introducao_files/logo.png',
              },

      // Author information
      presenters: [
            {
        name:  'Prof.: Thais Paiva' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <link href="libs/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="libs/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="libs/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="libs/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="libs/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="libs/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="libs/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="libs/ioslides-13.5.1/js/hammer.js"></script>
  <script src="libs/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="libs/ioslides-13.5.1/js/slide-deck.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }

    slides > slide:not(.nobackground):before {
      font-size: 12pt;
      content: "";
      position: absolute;
      bottom: 20px;
      left: 60px;
      background: url(01-introducao_files/logo.png) no-repeat 0 50%;
      -webkit-background-size: 30px 30px;
      -moz-background-size: 30px 30px;
      -o-background-size: 30px 30px;
      background-size: 30px 30px;
      padding-left: 40px;
      height: 30px;
      line-height: 1.9;
    }
  </style>

  <link rel="stylesheet" href="my.css" type="text/css" />

</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <aside class="gdbar"><img src="01-introducao_files/logo.png"></aside>
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">05 de março de 2018</p>
          </hgroup>
  </slide>

<slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>Introdução</h2></hgroup><article  id="introducao">

</article></slide><slide class=""><hgroup><h2>Objetivo</h2></hgroup><article  id="objetivo">

<ul>
<li><p>O objetivo do curso é apresentar uma série de funções e aplicações computacionais presentes no dia a dia de trabalho de um atuário e profissionais que venham a trabalhar com cálculo de risco.</p></li>
<li><p>O curso vai abordar tópicos básicos de manipulação e análise de bases de dados no R, juntamente com as principais funções para aplicações de cálculos de risco, matemática atuarial e tarifação de seguros.</p></li>
<li><p><strong>Pré-requisitos: Técnicas Atuariais I</strong></p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Informações</h2></hgroup><article  id="informacoes">

<p>Site: <a href='http://www.est.ufmg.br/~thaispaiva/Disciplinas/2018_1/MetComp/' title=''>http://www.est.ufmg.br/~thaispaiva/Disciplinas/2018_1/MetComp/</a></p>

</article></slide><slide class=""><hgroup><h2>Bibliografia</h2></hgroup><article  id="bibliografia">

<ul>
<li>Charpentier, A. (Ed.). (2014). <strong>Computational actuarial science with R</strong>. CRC Press.</li>
</ul>

<p><img src="img/charpentier.jpg" width="20%" style="display: block; margin: auto;" /></p>

<ul>
<li>Hothorn, T., &amp; Everitt, B. S. (2014). <strong>A handbook of statistical analyses using R</strong>. CRC press.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Avaliação</h2></hgroup><article  id="avaliacao">

<table class = 'rmdtable'>
<tr class="header">
<th align="left">Atividade</th>
<th align="left">Nota</th>
</tr>
<tr class="odd">
<td align="left">Participação</td>
<td align="left">10 pts</td>
</tr>
<tr class="even">
<td align="left">Listas semanais</td>
<td align="left">50 pts</td>
</tr>
<tr class="odd">
<td align="left">Trabalho Final</td>
<td align="left">40 pts</td>
</tr>
</table>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>R para Atuária?</h2></hgroup><article  id="r-para-atuaria">

</article></slide><slide class=""><hgroup><h2>Por que usar R</h2></hgroup><article  id="por-que-usar-r">

<ul>
<li><p>R é um software livre e <em>open-source</em>.</p></li>
<li><p>Isso faz com que o R possa ser instalado gratuitamente na maioria dos computadores e servidores.</p></li>
<li><p>Por ser independente do sistema operacional e <em>open-source</em>, é a linguagem ideal para <strong>pesquisa reproduzível</strong>.</p></li>
<li><p>E porque <span class="blue3">
<strong>atuários</strong></span> devem usar o R?</p>

<ul>
<li>R permite que seus usuários façam análises complexas sem saber a fundo os detalhes de sistemas computacionais.</li>
</ul></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Métodos Computacionais para Atuária</h2></hgroup><article  id="metodos-computacionais-para-atuaria">

<ul>
<li><p>Para ilustrar a importância de métodos computacionais para atuária, vamos considerar um exemplo:</p>

<ul>
<li><p>Suponha que você precise calcular o quantil 99,5% de uma <span class="red3">
soma aleatória de indenizações</span> (popular entre atuários que precisam calcular <em>Value-at-Risk</em>).</p></li>
<li><p>Do ponto de vista probabilístico, precisamos encontrar, para todo \(s \in \mathbb{R}\):</p></li>
</ul></li>
</ul>

<p>\[ F(s) = \mathbb{P}(S \leq s), \mbox{ onde }\,\, S = \sum_{i=1}^N X_i \]</p>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes">

<ul>
<li>Sob independência, podemos usar uma fórmula para a convolução:</li>
</ul>

<p>\[ F(s) = \sum_{n=0}^{\infty} F_X^{*n}(x) \,.\, \mathbb{P}(N=n) \]</p>

<ul>
<li>Precisamos estimar:

<ol>
<li>a distribuição das <strong>indenizações</strong> \(X_i\);</li>
<li>e a distribuição do <strong>número de sinistros</strong> \(N\).</li>
</ol></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes-1" class="build">

<ul>
<li>Vamos simular uma amostra de 200 indenizações:</li>
</ul>

<pre class = 'prettyprint lang-r'># fixar a semente
set.seed(1)
# gerar uma amostra de tamanho 200
X = rexp(200, rate=1/100)
head(X)</pre>

<pre >## [1]  75.51818 118.16428  14.57067  13.97953  43.60686 289.49685</pre>

<ul>
<li>Média?</li>
</ul>

<pre class = 'prettyprint lang-r'>mean(X)</pre>

<pre >## [1] 99.99842</pre>

<ul>
<li>Vamos supor que essas são as nossas observações.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes-2">

<ul>
<li><p>Vamos estimar a <span class="blue3">
distribuição dos \(X_i&#39;s\)</span>.</p></li>
<li><p>Uma distribuição razoável para indenizações é a <strong>Gama(\(\alpha\),\(\beta\))</strong>.</p></li>
</ul>

<ul class = 'build'>
<li>Um método para encontrar \(\hat{\alpha}\) e \(\hat{\beta}\) é resolvendo as equações normais abaixo: \[ \log{\hat{\alpha}} - \frac{\Gamma&#39;(\hat{\alpha})}{\Gamma(\hat{\alpha})} - \log{\bar{X}} + \overline{\log{X}} = 0  \] \[\hat{\beta} = \frac{\hat{\alpha}}{\bar{X}} \]</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes-3">

<pre class = 'prettyprint lang-r'># equação em função de x=alfa
f = function(x){
  log(x) - digamma(x) - log(mean(X)) + mean(log(X))
}

# encontrar a raiz da equação
alpha = uniroot(f, interval = c(1e-8,1e8))$root
alpha # estimador para alfa</pre>

<pre >## [1] 1.308995</pre>

<pre class = 'prettyprint lang-r'>beta = alpha/mean(X) # estimador para beta
beta</pre>

<pre >## [1] 0.01309016</pre>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes-4">

<ul>
<li>Com os valores de \(\hat{\alpha}\) e \(\hat{\beta}\), temos uma distribuição estimada para as indenizações \(X_i\).</li>
</ul>

<p>\[X_i \sim Gamma (\hat{\alpha}, \hat{\beta}) \]</p>

<ul class = 'build'>
<li>Para o número de sinistros, vamos assumir que \[N \sim Poisson(\lambda = 100) \]</li>
</ul>

<ul class = 'build'>
<li>Agora, precisamos calcular o quantil 99,5% da soma aleatória \(S=\sum_{i=1}^N X_i\). Isso pode ser feito facilmente de maneira computacional.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes-5">

<ul>
<li>Uma maneira é calcular numericamente (para um número fixo de termos) a fórmula da convolução:</li>
</ul>

<p>\[ F(s) = \mathbb{P}(S \leq s) = \sum_{n=0}^{\infty} F_{X}^{*n}(x) \,.\, \mathbb{P}(N=n) \]</p>

<ul class = 'build'>
<li>Para calcular o primeiro termo, \(F_{X}^{*n}(x)\), vamos usar o fato de que a <a href='https://en.wikipedia.org/wiki/Gamma_distribution#Summation' title=''>soma de \(n\) v.a.’s iid Gama\((\alpha;\, \beta)\) também é Gama</a> com parâmetros \((n*\alpha; \, \beta)\).</li>
</ul>

<ul class = 'build'>
<li>O segundo termo é a função de probabilidade da Poisson.</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes-6" class="build">

<ul>
<li>Função para calcular a distribuição acumulada de \(S\):</li>
</ul>

<pre class = 'prettyprint lang-r'># função da distribuição acumulada de S
F = function(x, lambda=100, nmax=1000){
  n = 0:nmax
  return( sum(pgamma(x, n*alpha, beta)*dpois(n, lambda)) )
}</pre>

<ul>
<li>Agora precisamos encontrar \(x\) tal que \(F(x)=0.995\) (ou equivalentemente encontrar a raiz da função \(F(x)-0.995=0\)).</li>
</ul>

<pre class = 'prettyprint lang-r'># encontrando o quantil .995
uniroot(function(x) F(x)-.995, c(1e-8,1e8) )$root</pre>

<pre >## [1] 13654.43</pre>

</article></slide><slide class=""><hgroup><h2>Exemplo - Soma de Indenizações</h2></hgroup><article  id="exemplo---soma-de-indenizacoes-7">

<ul>
<li>Isso quer dizer que, com os valores estimados de \(\hat{\alpha}=\) 1.31, \(\hat{\beta}=\) 0.01, e assumindo \(\lambda=100\), temos um quantil estimado para a soma aleatória das indenizações.</li>
</ul>

<p>\[\mathbb{P} \left( S = \sum_{i=1}^N X_i \leq 13654.43 \right) = 0.995 \]</p>

</article></slide><slide class=""><hgroup><h2><span class="green3">
Exercícios </h2><h3> Estendendo o exemplo</span></h3></hgroup><article  id="exercicios-estendendo-o-exemplo">

<ol>
<li><p>Repetir o exemplo da aula, mudando o valor da <em>semente</em>.</p></li>
<li><p>Você pode mudar também o <em>tamanho da amostra</em> e a <em>média</em> que usamos para gerar as primeiras observações e estimar \(\hat{\alpha}\) e \(\hat{\beta}\). Veja o que muda nas estimativas dos parâmetros.</p></li>
<li><p>Repita os passos para encontrar o novo valor do <em>quantil</em>.</p>

<ol>
<li>O que acontece se mudarmos o valor de \(\lambda\)?</li>
<li>O que acontece se aumentarmos o valor de <code>nmax</code>?</li>
</ol></li>
</ol>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>A linguagem R</h2></hgroup><article  id="a-linguagem-r">

</article></slide><slide class=""><hgroup><h2>A linguagem R</h2></hgroup><article  id="a-linguagem-r-1">

<ul>
<li><p>R é uma linguagem para <strong>manipulação de dados</strong>, <strong>análise estatística</strong> e <strong>visualização gráfica</strong>.</p></li>
<li><p>R foi baseado no ambiente S (<em>Statistics</em>), criado na década de 70.</p></li>
<li><p>R é uma linguagem interpretada (<em>interpreted language</em>): as expressões digitadas no <em>consolde</em> são executados imediatamente pelo <strong>interpretador</strong>. Por exemplo, se você digitar <code>2+3</code> na linha de comando, o computador irá retornar <code>5</code>.</p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>A linguagem R</h2></hgroup><article  id="a-linguagem-r-2">

<ul>
<li><p>R é uma <span class="red3">
linguagem orientada a objetos</span> (<em>object-oriented language</em>):</p>

<ul>
<li>são criados <strong>objetos</strong> (veremos mais detalhes sobre eles nas próximas aulas) que contém informações úteis e que podem ser chamados por outras <strong>funções</strong>;</li>
</ul>

<ul class = 'build'>
<li>por exemplo, quando ajustamos um <span class="blue3">
modelo de regressão</span> no R com a <strong>função</strong> <code>lm</code> (<em>Linear Models</em>), a <strong>função</strong> retorna um <strong>objeto</strong> que contém várias informações (por exemplo, os coeficientes estimados \(\hat{\beta}\), os resíduos \(\hat{e}\), a matriz de variância estimada \(var(\hat{\beta})\), etc.).</li>
</ul></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Vetores e Matrizes</h2></hgroup><article  id="vetores-e-matrizes">

<ul>
<li><p>Os <strong>objetos</strong> mais usados no R são <span class="red3">
<strong>vetores</strong></span>. Eles podem conter números inteiros, números reais, resultados de um teste lógico (<code>TRUE</code>-<code>FALSE</code>).</p></li>
<li><p>Eles podem ser usados em expressões aritméticas, onde as operações são feitas elemento a elemento:</p>

<blockquote>
<p>por exemplo, o comando <code>a*b</code> irá retornar um vetor com os elementos \([a_i \cdot b_i]\).</p>
</blockquote></li>
<li><p><span class="red3">
<strong>Matrizes</strong></span> são a extensão bidimensional dos vetores.</p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Vetores em Cálculos Atuariais</h2></hgroup><article  id="vetores-em-calculos-atuariais">

<ul>
<li><p>Em aplicações de Ciências Atuariais, várias quantidades podem ser escritas como <strong>vetores</strong> ou <strong>matrizes</strong>.</p>

<ul>
<li>Por exemplo, a <span class="blue3">
probabilidade que uma pessoa de idade \(x\) irá sobreviver \(k\) anos</span> é denotada por \({}_{k}p_x\) (função de \(x\) e \(k\) inteiros), e pode ser armazenada em uma <span class="red3">
<strong>matriz</strong></span> <code>p</code>.</li>
</ul></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Vetores em Cálculos Atuariais</h2></hgroup><article  id="vetores-em-calculos-atuariais-1" class="build">

<ul>
<li><p>Suponha que queremos calcular a <span class="blue3">
expectativa de vida em anos inteiros</span>, dada por:</p>

\[ e_x = \sum_{k=1}^{\infty} {}_{k}p_x\]</li>
<li><p>Com a matriz <code>p</code>, basta fazer:</p></li>
</ul>

<pre class = 'prettyprint lang-r'>life.exp = function(x){
  sum(p[1:nrow(p),x])
}</pre>

</article></slide><slide class=""><hgroup><h2>R para Ciências Atuariais</h2></hgroup><article  id="r-para-ciencias-atuariais">

<ul>
<li><p>Vários cálculos do cotidiano de um atuário, como precificação de seguros e cálculo de reservas, são feitos baseados em <strong>dados passados</strong> para criar modelos para descrever o <strong>comportamento futuro</strong> (<em>predictive modelling</em>).</p></li>
<li><p>O objetivo é <span class="red3">
<strong>inferir</strong></span> dos dados as características para melhor explicar o risco e calcular o prêmio para diferentes segurados, ou calcular reservas para diferentes tipos de sinistros.</p></li>
<li><p>Nesse curso, vamos aprender como calcular essas quantidades usando o R.</p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Pacotes do R</h2></hgroup><article  id="pacotes-do-r">

<ul>
<li><p>Um pacote é um conjunto de funções (incluindo arquivos de ajuda e bancos de dados) para fazer algumas operações específicas.</p></li>
<li><p>O R já vem com alguns pacotes carregados por <em>default</em>:</p></li>
</ul>

<pre class = 'prettyprint lang-r'>getOption(&quot;defaultPackages&quot;)</pre>

<pre >## [1] &quot;datasets&quot;  &quot;utils&quot;     &quot;grDevices&quot; &quot;graphics&quot;  &quot;stats&quot;</pre>

<ul>
<li>Para ver todos os pacotes instalados:</li>
</ul>

<pre class = 'prettyprint lang-r'>(.packages(all.available = TRUE))</pre>

</article></slide><slide class=""><hgroup><h2>Pacotes do R</h2></hgroup><article  id="pacotes-do-r-1">

<ul>
<li>Para instalar outros pacotes de um repositório na internet:</li>
</ul>

<pre class = 'prettyprint lang-r'>install.packages(&quot;quantreg&quot;, dependencies=TRUE)</pre>

<ul>
<li><p>A opção <code>dependencies=TRUE</code> significa que vai instalar também os outros pacotes que forem usados pelas funções do pacote <code>quantreg</code>.</p></li>
<li><p>Você só precisa <span class="red3">
<strong>instalar</strong></span> o pacote uma vez. Mas precisa <span class="red3">
<strong>carregá-lo</strong></span> toda vez que for usar! Para isso, você pode usar qualquer um dos comandos:</p></li>
</ul>

<pre class = 'prettyprint lang-r'>library(quantreg)
require(quantreg)</pre>

</article></slide><slide class=""><hgroup><h2><span class="green3">
Exercício</span></h2></hgroup><article  id="exercicio">

<ul>
<li><p>Para a próxima aula:</p>

<ol>
<li><p>Revisar os conceitos da aula de hoje;</p></li>
<li><p>Instalar (ou atualizar) a versão mais recente do <code>R</code> e <code>RStudio</code> (links na seção <a href='http://www.est.ufmg.br/~thaispaiva/Disciplinas/2018_1/MetComp/ferramentas/' title=''><em>Ferramentas</em></a> do site).</p></li>
<li><p>Fazer os exercícios da primeira parte da aula.</p></li>
</ol></li>
</ul></article></slide>


  <slide class="backdrop"></slide>

</slides>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
